# IncentEdge Environment Variables
# Copy this file to .env.local and fill in your actual values
# NEVER commit .env.local to version control

# ==========================================
# CRITICAL - Required for Application
# ==========================================

# Supabase Configuration
# Get these from: https://app.supabase.com/project/_/settings/api
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# Application Configuration
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_APP_NAME=IncentEdge

# Node Environment (development, production, test)
NODE_ENV=development

# ==========================================
# SECURITY - Required for Production
# ==========================================

# API Security
# Generate with: openssl rand -base64 32
API_SIGNING_SECRET=generate_a_random_32_character_secret_here
API_KEY_PREFIX=ie_

# Session Security
# Generate with: openssl rand -base64 32
SESSION_SECRET=generate_another_random_32_character_secret_here

# Webhook Security (for external integrations)
# Generate with: openssl rand -base64 32
WEBHOOK_SIGNING_SECRET=generate_webhook_secret_here

# CORS Configuration
# Comma-separated list of allowed origins
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com

# ==========================================
# AI/LLM Configuration - Optional
# ==========================================

# DeepSeek API (Tier 1 - Document extraction, low-cost operations)
# Get from: https://platform.deepseek.com/api_keys
DEEPSEEK_API_KEY=your_deepseek_api_key_here

# Anthropic Claude API (Tier 2/3 - Advanced analysis, recommendations)
# Get from: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# OpenAI API (Fallback provider)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key_here

# AI Provider Configuration
# Options: deepseek, anthropic, openai
AI_PRIMARY_PROVIDER=deepseek

# ==========================================
# EMAIL - Optional
# ==========================================

# SendGrid (for transactional emails)
# Get from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=SG.your_sendgrid_api_key_here
SENDGRID_FROM_EMAIL=noreply@yourdomain.com
SENDGRID_FROM_NAME=IncentEdge

# Resend (alternative email provider)
# Get from: https://resend.com/api-keys
RESEND_API_KEY=re_your_resend_api_key_here

# ==========================================
# PAYMENTS - Optional
# ==========================================

# Stripe Configuration
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# Stripe Price IDs (from your Stripe product setup)
STRIPE_PRICE_ID_STARTER=price_starter_id_here
STRIPE_PRICE_ID_PROFESSIONAL=price_professional_id_here
STRIPE_PRICE_ID_ENTERPRISE=price_enterprise_id_here

# ==========================================
# ANALYTICS - Optional
# ==========================================

# PostHog (Product analytics)
# Get from: https://app.posthog.com/project/settings
NEXT_PUBLIC_POSTHOG_KEY=phc_your_posthog_key_here
NEXT_PUBLIC_POSTHOG_HOST=https://app.posthog.com

# Sentry (Error tracking)
# Get from: https://sentry.io/settings/projects/
SENTRY_DSN=https://your_sentry_dsn_here
NEXT_PUBLIC_SENTRY_DSN=https://your_public_sentry_dsn_here
SENTRY_AUTH_TOKEN=your_sentry_auth_token_here

# Google Analytics
NEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX

# ==========================================
# RATE LIMITING - Optional
# ==========================================

# Token bucket rate limiting configuration
RATE_LIMIT_MAX_TOKENS=100
RATE_LIMIT_REFILL_RATE=10
RATE_LIMIT_REFILL_INTERVAL_MS=1000

# Per-endpoint rate limits (requests per minute)
RATE_LIMIT_API_RPM=60
RATE_LIMIT_AUTH_RPM=10
RATE_LIMIT_EXPORT_RPM=10

# ==========================================
# WEBHOOK CONFIGURATION - Optional
# ==========================================

# Webhook retry configuration
WEBHOOK_MAX_RETRIES=5
WEBHOOK_TIMEOUT_MS=30000
WEBHOOK_RETRY_DELAY_MS=1000

# ==========================================
# BACKGROUND JOBS - Optional
# ==========================================

# Job queue configuration
JOB_MAX_RETRIES=3
JOB_RETRY_DELAY_MS=5000
JOB_CLEANUP_INTERVAL_MS=3600000

# ==========================================
# DOCUMENT STORAGE - Optional
# ==========================================

# AWS S3 (for document uploads)
AWS_ACCESS_KEY_ID=your_aws_access_key_here
AWS_SECRET_ACCESS_KEY=your_aws_secret_key_here
AWS_REGION=us-east-1
AWS_S3_BUCKET=your-bucket-name
AWS_S3_UPLOAD_PREFIX=uploads/

# Cloudflare R2 (alternative to S3)
R2_ACCOUNT_ID=your_r2_account_id_here
R2_ACCESS_KEY_ID=your_r2_access_key_here
R2_SECRET_ACCESS_KEY=your_r2_secret_key_here
R2_BUCKET=your-r2-bucket-name

# ==========================================
# COMPLIANCE & CERTIFICATIONS - Optional
# ==========================================

# External compliance verification services
COMPLIANCE_VERIFICATION_API_KEY=your_compliance_api_key_here
COMPLIANCE_VERIFICATION_ENDPOINT=https://api.compliance-service.com

# ==========================================
# INTEGRATIONS - Optional
# ==========================================

# Procore Integration
PROCORE_CLIENT_ID=your_procore_client_id_here
PROCORE_CLIENT_SECRET=your_procore_client_secret_here
PROCORE_REDIRECT_URI=https://yourdomain.com/integrations/procore/callback

# Autodesk Construction Cloud
AUTODESK_CLIENT_ID=your_autodesk_client_id_here
AUTODESK_CLIENT_SECRET=your_autodesk_client_secret_here
AUTODESK_CALLBACK_URL=https://yourdomain.com/integrations/autodesk/callback

# Salesforce
SALESFORCE_CONSUMER_KEY=your_salesforce_consumer_key_here
SALESFORCE_CONSUMER_SECRET=your_salesforce_consumer_secret_here
SALESFORCE_CALLBACK_URL=https://yourdomain.com/integrations/salesforce/callback

# ==========================================
# LOGGING - Production Structured Logging
# ==========================================

# Log Level (error, warn, info, debug, trace)
# Production: info, Development: debug
LOG_LEVEL=info

# Log Format (json for production, pretty for development)
LOG_FORMAT=json

# Console Logging (always enabled for development)
LOG_CONSOLE_ENABLED=true

# File Logging Configuration
LOG_FILE_ENABLED=true
LOG_FILE_DIRECTORY=./logs
LOG_FILE_NAME=incentedge-%DATE%.log
LOG_FILE_MAX_SIZE=20m
LOG_FILE_MAX_FILES=14d
LOG_FILE_COMPRESSION=true

# AWS CloudWatch Logs (Optional - for centralized logging)
CLOUDWATCH_ENABLED=false
CLOUDWATCH_LOG_GROUP=/incentedge/production
CLOUDWATCH_LOG_STREAM=
CLOUDWATCH_REGION=us-east-1

# Security Logging
SECURITY_LOGGING_ENABLED=true
SECURITY_LOG_ALL_ACCESS=false
SECURITY_LOG_FAILURES_ONLY=true

# Audit Logging (SOC 2 Compliance)
AUDIT_LOGGING_ENABLED=true
AUDIT_RETENTION_DAYS=2555  # 7 years for SOC 2 compliance
AUDIT_IMMUTABLE=true

# ==========================================
# DEVELOPMENT & DEBUGGING - Optional
# ==========================================

# Debug mode (NEVER enable in production)
DEBUG_MODE=false

# Development features (NEVER enable in production)
SKIP_API_KEY_VALIDATION=false
SKIP_RATE_LIMITING=false
DEV_API_KEY_PREFIX=dev_ie_

# Enable query logging
LOG_QUERIES=false

# Enable API request logging
LOG_API_REQUESTS=false

# ==========================================
# DATABASE - Optional Overrides
# ==========================================

# Database connection pooling
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_IDLE_TIMEOUT_MS=10000

# ==========================================
# CACHING - Optional
# ==========================================

# Redis configuration (for distributed caching)
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your_redis_password_here
REDIS_TLS_ENABLED=false

# Cache TTL (in seconds)
CACHE_TTL_INCENTIVES=3600
CACHE_TTL_PROJECTS=1800
CACHE_TTL_ELIGIBILITY=300

# ==========================================
# MONITORING - Optional
# ==========================================

# Application monitoring
NEW_RELIC_LICENSE_KEY=your_new_relic_license_key_here
NEW_RELIC_APP_NAME=IncentEdge

# Uptime monitoring webhook
UPTIME_WEBHOOK_URL=https://your-uptime-monitoring-service.com/webhook

# ==========================================
# FEATURE FLAGS - Optional
# ==========================================

# Feature toggles
FEATURE_AI_RECOMMENDATIONS=true
FEATURE_PDF_REPORTS=true
FEATURE_DIRECT_PAY_CHECKER=true
FEATURE_SCENARIO_MODELING=true
FEATURE_MULTI_TENANT=true
FEATURE_API_INTEGRATIONS=true
FEATURE_WEBHOOKS=true
FEATURE_COMPLIANCE_TRACKING=true

# ==========================================
# ENVIRONMENT-SPECIFIC OVERRIDES
# ==========================================

# Port for local development (default: 3000)
PORT=3000

# Enable/disable Next.js telemetry
NEXT_TELEMETRY_DISABLED=1

# Build optimizations
ANALYZE=false
